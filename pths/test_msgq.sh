#!/bin/bash

# –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –æ—á–µ—Ä–µ–¥—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

echo "================================================"
echo "  –¢–ï–°–¢: pthread + Message Queue"
echo "================================================"
echo ""

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π
echo "üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π..."
ipcs -q | grep $(whoami) | awk '{print $2}' | xargs -I {} ipcrm -q {} 2>/dev/null
echo ""

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
echo "üì¶ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã..."
gcc -o itg.out itg.c -lm -lpthread 2>&1
if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
    exit 1
fi
echo ""

echo "================================================"
echo "  –†–µ–∂–∏–º –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ f(x) = sqrt(x)"
echo "================================================"
echo ""

# –¢–µ—Å—Ç 1
echo "üß™ –¢–µ—Å—Ç 1: ‚à´[0,4] sqrt(x)dx (–æ–∂–∏–¥–∞–µ—Ç—Å—è ~5.33)"
echo "---"
./itg.out cont 0 4 0.01
echo ""
echo ""

# –¢–µ—Å—Ç 2
echo "üß™ –¢–µ—Å—Ç 2: ‚à´[1,9] sqrt(x)dx (–æ–∂–∏–¥–∞–µ—Ç—Å—è ~17.33)"
echo "---"
./itg.out cont 1 9 0.001
echo ""
echo ""

# –¢–µ—Å—Ç 3
echo "üß™ –¢–µ—Å—Ç 3: ‚à´[1,16] sqrt(x)dx (–æ–∂–∏–¥–∞–µ—Ç—Å—è ~42.00)"
echo "---"
./itg.out cont 1 16 0.001
echo ""
echo ""

echo "================================================"
echo "  –†–µ–∂–∏–º –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"
echo "================================================"
echo ""

# –¢–µ—Å—Ç 4
echo "üß™ –¢–µ—Å—Ç 4: –î–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (5 —Ç–æ—á–µ–∫)"
echo "---"
./itg.out 5 0 1 2 3 4 0 1 1.414 1.732 2 1 5 0.01
echo ""
echo ""

# –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
echo "üßπ –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π..."
ipcs -q | grep $(whoami) | awk '{print $2}' | xargs -I {} ipcrm -q {} 2>/dev/null
echo ""

echo "================================================"
echo "  –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û"
echo "================================================"
echo ""
echo "‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –æ—á–µ—Ä–µ–¥–∏:"
echo "  ipcs -q"
echo ""

